# PROGRESS LOG: –°–≤—ñ—Ç–ª–æ–ë–æ—Ç

** –î–∞—Ç–∞
–Ω–∞—á–∞–ª–∞: ** 2025 - 11 - 0
8
** –ü–æ—Å–ª–µ–¥–Ω–µ–µ
–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ** 2025 - 11 - 0
9
00: 35
** –°—Ç–∞—Ç—É—Å: ** –í
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ(–î–µ–Ω—å
1
–∑–∞–≤–µ—Ä—à—ë–Ω)

---

## üìä –û–ë–©–ò–ô –ü–†–û–ì–†–ï–°–°

- [x] ** –®–ê–ì
1: ** Infrastructure
Setup ‚úÖ (4 —á–∞—Å–∞)
- [x] ** –®–ê–ì
2: ** Backend
Core ‚úÖ (6 —á–∞—Å–æ–≤)
- [x] ** –®–ê–ì
3: ** Database
Models ‚úÖ (4 —á–∞—Å–∞)
- [] ** –®–ê–ì
4: ** API
Endpoints(6
—á–∞—Å–æ–≤) - –ó–ê–í–¢–†–ê
- [] ** –®–ê–ì
5: ** Telegram
Bot(8
—á–∞—Å–æ–≤)
- [] ** –®–ê–ì
6: ** Notifications(4
—á–∞—Å–∞)
- [] ** –®–ê–ì
7: ** Payments & Referrals(4
—á–∞—Å–∞)
- [] ** –®–ê–ì
8: ** Admin
Bot(3
—á–∞—Å–∞)
- [] ** –®–ê–ì
9: ** Excel
Integration(2
—á–∞—Å–∞)
- [] ** –®–ê–ì
10: ** IoT
Backend(2
—á–∞—Å–∞)
- [] ** –®–ê–ì
11: ** CrowdReports(2
—á–∞—Å–∞)
- [] ** –®–ê–ì
12: ** Subscription
Check(2
—á–∞—Å–∞)
- [] ** –®–ê–ì
13: ** Nginx + SSL(1
—á–∞—Å)
- [] ** –®–ê–ì
14: ** Testing(2
—á–∞—Å–∞)
- [] ** –®–ê–ì
15: ** Final & Production(3
—á–∞—Å–∞)

** –ü—Ä–æ—Ü–µ–Ω—Ç
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ** 20 % (3 –∏–∑ 15 —à–∞–≥–æ–≤)

---

## üñ•Ô∏è –°–†–ï–î–ê –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞:
- ** –û–°: ** macOS
13(Ventura)
- ** Docker: ** Colima
0.9
.1(–≤–º–µ—Å—Ç–æ
Docker
Desktop)
- ** –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
–ø—Ä–æ–µ–∫—Ç–∞: ** `~ / Desktop / Projects_Python / svitlobot`

### VPS —Å–µ—Ä–≤–µ—Ä:
- ** –°—Ç–∞—Ç—É—Å: ** ‚ùå –ù–ï
–ö–£–ü–õ–ï–ù(–∫—É–ø–∏–º
–ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞
–≤—Å—ë
–±—É–¥–µ—Ç
–≥–æ—Ç–æ–≤–æ)
- ** –ü–ª–∞–Ω: ** Vultr
VPS
- ** –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏(–ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ): **
- CPU: 4 - 8
cores
- RAM: 8 - 16
GB
- Storage: 80 - 200
GB
SSD
- OS: Ubuntu
22.04
LTS

### –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–ª–æ–∫–∞–ª—å–Ω–æ):
- ‚úÖ PostgreSQL
14(–ø–æ—Ä—Ç
5432)
- ‚úÖ Redis
7(–ø–æ—Ä—Ç
6379)
- ‚úÖ FastAPI
Backend(–ø–æ—Ä—Ç
8000)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### Docker:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º ** Colima ** –≤–º–µ—Å—Ç–æ
Docker
Desktop(macOS
13
–Ω–µ
–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
–Ω–æ–≤—ã–π
Docker
Desktop)
- –ö–æ–º–∞–Ω–¥–∞
–∑–∞–ø—É—Å–∫–∞: `colima
start - -cpu
4 - -memory
8
`
- –ö–æ–º–∞–Ω–¥–∞
docker - compose: `docker - compose`(—Å
–¥–µ—Ñ–∏—Å–æ–º, –Ω–µ
`docker
compose
`)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ** 12
—Ç–∞–±–ª–∏—Ü
—Å–æ–∑–¥–∞–Ω–æ: ** users, queues, addresses, user_addresses, notifications, schedules, payments, referral_activations, crowdreports, iot_sensors, iot_data, alembic_version
- ** 12
—á–µ—Ä–≥
–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: ** queue_id
–æ—Ç
1
–¥–æ
12
- ** –ú–∏–≥—Ä–∞—Ü–∏–∏: ** Alembic
–Ω–∞—Å—Ç—Ä–æ–µ–Ω
–∏
—Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã (development):
```
POSTGRES_PASSWORD = svetlobot_dev_pass_2024
REDIS_PASSWORD = redis_dev_pass_2024
ADMIN_API_TOKEN = dev_admin_token_12345
IOT_API_KEY = dev_iot_key_12345

# Telegram —Ç–æ–∫–µ–Ω—ã - –ï–©–Å –ù–ï –ü–û–õ–£–ß–ï–ù–´
TELEGRAM_BOT_TOKEN = YOUR_BOT_TOKEN_HERE(–ø–æ–ª—É—á–∏—Ç—å
—É @ BotFather)
ADMIN_BOT_TOKEN = YOUR_ADMIN_BOT_TOKEN_HERE
TELEGRAM_CHANNEL_ID = -1001234567890(—Å–æ–∑–¥–∞—Ç—å
–∫–∞–Ω–∞–ª)
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ù–Æ–ê–ù–°–´

### 1. Alembic env.py
** –ü—Ä–æ–±–ª–µ–º–∞: ** `
from models import *

` –Ω–µ
—Ä–∞–±–æ—Ç–∞–ª
** –†–µ—à–µ–Ω–∏–µ: ** –Ø–≤–Ω—ã–π
–∏–º–ø–æ—Ä—Ç
–≤—Å–µ—Ö
–º–æ–¥–µ–ª–µ–π:
```python
from models.user import User
from models.queue import Queue

# ... –∏ —Ç.–¥.
```

### 2. requirements.txt
** –î–æ–±–∞–≤–ª–µ–Ω–æ: ** `psycopg2 - binary == 2.9
.9
` (–Ω—É–∂–µ–Ω –¥–ª—è Alembic)

### 3. docker-compose.yml
** –£–¥–∞–ª–µ–Ω–æ: ** `version: '3.8'
` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –≤—ã–∑—ã–≤–∞–ª warning)

### 4. SQLAlchemy test endpoint
** –ü—Ä–æ–±–ª–µ–º–∞: ** `session.execute("SELECT 1")`
–Ω–µ
—Ä–∞–±–æ—Ç–∞–ª
** –†–µ—à–µ–Ω–∏–µ: ** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
`text()`:
```python
from sqlalchemy import text

result = await session.execute(text("SELECT 1"))
```

---

## üì¶ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
svitlobot /
‚îú‚îÄ‚îÄ.env                           ‚úÖ –°–æ–∑–¥–∞–Ω
‚îú‚îÄ‚îÄ.gitignore                     ‚úÖ –°–æ–∑–¥–∞–Ω
‚îú‚îÄ‚îÄ docker - compose.yml             ‚úÖ –°–æ–∑–¥–∞–Ω
‚îú‚îÄ‚îÄ backend /
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt           ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ config.py                  ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ database.py                ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ redis_client.py            ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ init_queues.py             ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ alembic.ini                ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ alembic /
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.py                 ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako         ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ versions /
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ 20251109_0029
_ *.py ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ models /                    ‚úÖ (9 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queue.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ address.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ referral.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crowdreport.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ iot_sensor.py
‚îÇ   ‚îú‚îÄ‚îÄ api /                       ‚ùå –ü—É—Å—Ç–∞—è(–®–∞–≥
4)
‚îÇ   ‚îú‚îÄ‚îÄ services /                  ‚ùå –ü—É—Å—Ç–∞—è
‚îÇ   ‚îî‚îÄ‚îÄ tasks /                     ‚ùå –ü—É—Å—Ç–∞—è
‚îú‚îÄ‚îÄ bot /                           ‚ùå –ù–µ
—Å–æ–∑–¥–∞–Ω(–®–∞–≥
5)
‚îú‚îÄ‚îÄ admin_bot /                     ‚ùå –ù–µ
—Å–æ–∑–¥–∞–Ω(–®–∞–≥
8)
‚îú‚îÄ‚îÄ iot /                           ‚ùå –ù–µ
—Å–æ–∑–¥–∞–Ω(–®–∞–≥
10)
‚îî‚îÄ‚îÄ data /
‚îú‚îÄ‚îÄ excel /                     ‚úÖ –ü–∞–ø–∫–∞
—Å–æ–∑–¥–∞–Ω–∞
‚îî‚îÄ‚îÄ backups /                   ‚úÖ –ü–∞–ø–∫–∞
—Å–æ–∑–¥–∞–Ω–∞
```

---

## üîó API ENDPOINTS (—Ç–µ–∫—É—â–∏–µ)

### –†–∞–±–æ—Ç–∞—é—â–∏–µ:
- `GET / ` - Root(—Å—Ç–∞—Ç—É—Å
API)
- `GET / health` - Health
check
- `GET / docs` - Swagger
UI
- `GET / redoc` - ReDoc
- `GET / test / db` - –¢–µ—Å—Ç
PostgreSQL
- `GET / test / redis` - –¢–µ—Å—Ç
Redis

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ (–®–∞–≥ 4):
- ` / api / users
` - CRUD
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ` / api / queues
` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–æ
—á–µ—Ä–≥–∞—Ö
- ` / api / addresses
` - –ü–æ–∏—Å–∫
–∞–¥—Ä–µ—Å–æ–≤
- ` / api / notifications
` - –û—Ç–ø—Ä–∞–≤–∫–∞
—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ` / api / payments
` - LiqPay
–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ` / api / referrals
` - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è
–ø—Ä–æ–≥—Ä–∞–º–º–∞
- ` / api / crowdreports
` - –ö—Ä–∞—É–¥—Ä–µ–ø–æ—Ä—Ç—ã
- ` / api / iot
` - IoT
–¥–∞–Ω–Ω—ã–µ

---

## üìù TODO –î–õ–Ø –°–õ–ï–î–£–Æ–©–ï–ô –°–ï–°–°–ò–ò

### –ó–∞–≤—Ç—Ä–∞ (–î–µ–Ω—å 2):
1. ** –®–∞–≥
4: ** –°–æ–∑–¥–∞—Ç—å
API
endpoints(6
—á–∞—Å–æ–≤)
- users.py
- queues.py
- addresses.py
- notifications.py
- iot.py

2. ** –®–∞–≥
5: ** –ù–∞—á–∞—Ç—å
Telegram
Bot(–µ—Å–ª–∏
—É—Å–ø–µ–µ–º)

### Telegram —Ç–æ–∫–µ–Ω—ã (–ø–æ–ª—É—á–∏—Ç—å –¥–æ –®–∞–≥–∞ 5):
- []
–°–æ–∑–¥–∞—Ç—å
–æ—Å–Ω–æ–≤–Ω–æ–≥–æ
–±–æ—Ç–∞
—á–µ—Ä–µ–∑ @ BotFather
- []
–°–æ–∑–¥–∞—Ç—å
–∞–¥–º–∏–Ω - –±–æ—Ç–∞
—á–µ—Ä–µ–∑ @ BotFather
- []
–°–æ–∑–¥–∞—Ç—å
Telegram
–∫–∞–Ω–∞–ª
- []
–ü–æ–ª—É—á–∏—Ç—å
channel_id
—á–µ—Ä–µ–∑ @ getidsbot
- []
–û–±–Ω–æ–≤–∏—Ç—å.env
—Å
—Ä–µ–∞–ª—å–Ω—ã–º–∏
—Ç–æ–∫–µ–Ω–∞–º–∏

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ VPS:
- []
–ö—É–ø–∏—Ç—å
VPS
–Ω–∞
Vultr
- []
–°–º–µ–Ω–∏—Ç—å
–≤—Å–µ
–ø–∞—Ä–æ–ª–∏
–Ω–∞
–ø—Ä–æ–¥–∞–∫—à–Ω
–≤–µ—Ä—Å–∏–∏
- []
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å
SSL
—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- []
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å
backup
–ë–î

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –†–µ—à—ë–Ω–Ω—ã–µ:
- ‚úÖ Docker
Desktop
–Ω–µ
—Ä–∞–±–æ—Ç–∞–µ—Ç
–Ω–∞
macOS
13 ‚Üí –†–µ—à–µ–Ω–∏–µ: Colima
- ‚úÖ Alembic
–Ω–µ
–≤–∏–¥–∏—Ç
–º–æ–¥–µ–ª–∏ ‚Üí –†–µ—à–µ–Ω–∏–µ: –Ø–≤–Ω—ã–π
–∏–º–ø–æ—Ä—Ç
- ‚úÖ psycopg2
–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω
–≤
requirements.txt
- ‚úÖ docker - compose.yml
warning ‚Üí –†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª—ë–Ω
`version: '3.8'
`

### –ê–∫—Ç–∏–≤–Ω—ã–µ:
- –ù–µ—Ç
–∞–∫—Ç–∏–≤–Ω—ã—Ö
–ø—Ä–æ–±–ª–µ–º

---

## üìö –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

### Docker:
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker - compose
up - d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker - compose
down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ backend
docker - compose
build
backend

# –õ–æ–≥–∏
docker - compose
logs - f
backend

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker - compose
ps
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker - compose
exec
postgres
psql - U
svetlobot_user - d
svetlobot

# –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
docker - compose
exec
postgres
psql - U
svetlobot_user - d
svetlobot - c
"\dt"

# –ó–∞–ø—Ä–æ—Å
docker - compose
exec
postgres
psql - U
svetlobot_user - d
svetlobot - c
"SELECT * FROM queues;"
```

### Alembic:
```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker - compose
exec
backend
alembic
revision - -autogenerate - m
"Description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker - compose
exec
backend
alembic
upgrade
head

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker - compose
exec
backend
alembic
downgrade - 1

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
docker - compose
exec
backend
alembic
history
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
# Curl
curl
http: // localhost: 8000 / health

# –ë—Ä–∞—É–∑–µ—Ä
open
http: // localhost: 8000 / docs
```

---

## üí° –ò–î–ï–ò –ò –£–õ–£–ß–®–ï–ù–ò–Ø

### –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ:
- []
–î–æ–±–∞–≤–∏—Ç—å
pre - commit
hooks
–¥–ª—è
—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–∫–æ–¥–∞
- []
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å
GitHub
Actions
–¥–ª—è
CI / CD
- []
–î–æ–±–∞–≤–∏—Ç—å
pytest
–¥–ª—è
—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- []
–°–æ–∑–¥–∞—Ç—å
Makefile
–¥–ª—è
—É–ø—Ä–æ—â–µ–Ω–∏—è
–∫–æ–º–∞–Ω–¥

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –†–ï–°–£–†–°–´

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- FastAPI: https: // fastapi.tiangolo.com /
- Aiogram: https: // docs.aiogram.dev /
- SQLAlchemy: https: // docs.sqlalchemy.org /
- Alembic: https: // alembic.sqlalchemy.org /
- Docker: https: // docs.docker.com /

### Telegram:
- @ BotFather - —Å–æ–∑–¥–∞–Ω–∏–µ
–±–æ—Ç–æ–≤
- @ getidsbot - –ø–æ–ª—É—á–µ–Ω–∏–µ
ID
–∫–∞–Ω–∞–ª–æ–≤ / –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### LiqPay:
- API
Docs: https: // www.liqpay.ua / documentation / api

---

** –ö–û–ù–ï–¶
–õ–û–ì–ê **

_–û–±–Ω–æ–≤–ª—è–π
—ç—Ç–æ—Ç
—Ñ–∞–π–ª
–ø–æ—Å–ª–µ
–∫–∞–∂–¥–æ–≥–æ
–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ
–ø—Ä–æ–≥—Ä–µ—Å—Å–∞!_